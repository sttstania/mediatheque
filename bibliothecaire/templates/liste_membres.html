{% extends "base.html" %}

{% block title %}Liste des membres{% endblock %}

{% block content %}
<h2>Liste des membres</h2>

<div>
    <a href="{% url 'bibliothecaire:creation_membre' %}">âž• Ajouter un membre</a>
</div>

<table>
    <tr>
        <th>Nom</th>
        <th>Nombre d'emprunts</th>
        <th>MÃ©dias empruntÃ©s</th>
        <th>BloquÃ©</th>
        <th>Modifier</th>
        <th>Supprimer</th>
    </tr>
    {% for membre in membres %}
    <tr>
        <td>{{ membre.nom }}</td>
        <td>{{ membre.nb_emprunts }}</td>  {# Affiche le nombre d'emprunts  #}
        <td>
            {% for emprunt in membre.emprunt.emprunts_actuels %}
                {% if emprunt.livre %}
                    {{ emprunt.livre.titre }} (Livre)  - {{ emprunt.jours_emprunt }} jours<br>
                {% endif %}
                {% if emprunt.cd %}
                    {{ emprunt.cd.titre }} (CD) - {{ emprunt.jours_emprunt }} jours<br>
                {% endif %}
                {% if emprunt.dvd %}
                    {{ emprunt.dvd.titre }} (DVD) - {{ emprunt.jours_emprunt }} jours<br>
                {% endif %}
            {% empty %}
                Aucun mÃ©dia empruntÃ©
            {% endfor %}
        </td>
        <td>
            {% if membre.emprunteur.bloque %}
                ðŸš« Oui
            {% else %}
                âœ… Non
            {% endif %}
        </td>
        <td>
            <a href="{% url 'bibliothecaire:modifier_membre' membre.id %}">Modifier</a>
        </td>
        <td>
            <a href="{% url 'bibliothecaire:supprimer_membre' membre.id %}">Supprimer</a>
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="5">Aucun membre trouvÃ©.</td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
